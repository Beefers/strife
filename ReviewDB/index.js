(function(a,e,i,c,s,l,r,d,u){"use strict";const h="915703782174752809",m="https://manti.vendicated.dev",{pushModal:p,popModal:y}=r.findByProps("pushModal"),g=r.findByDisplayName("OAuth2AuthorizeModal");var v=()=>p({key:"oauth2-authorize",modal:{key:"oauth2-authorize",modal:g,animation:"slide-up",shouldPersistUnderModals:!1,props:{clientId:h,redirectUri:m+"/URauth",scopes:["identify"],responseType:"code",permissions:0n,cancelCompletesFlow:!1,callback:async function({location:n}){try{const o=new URL(n);o.searchParams.append("returnType","json"),o.searchParams.append("clientMod","vendetta");const b=await d.safeFetch(o.toString(),{headers:{accept:"application/json"}}),{token:k,status:E}=await b.json();if(E===0)e.storage.authToken=k;else throw new Error("Status returned by backend was not OK")}catch(o){u.logger.error("Authorization failed!",o)}},dismissOAuthModal:()=>y("oauth2-authorize")},closable:!0}});const{FormSection:w,FormRow:t}=l.Forms;var R=()=>(c.useProxy(e.storage),React.createElement(i.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(w,{title:"Authentication",titleStyleType:"no_border"},React.createElement(t,{label:"Authenticate with ReviewDB",leading:React.createElement(t.Icon,{source:s.getAssetIDByName("copy")}),trailing:t.Arrow,onPress:v}),React.createElement(t,{label:"Log out of ReviewDB",subLabel:"Note that this does not remove ReviewDB from your Authorized Apps page in Discord.",leading:React.createElement(t.Icon,{source:s.getAssetIDByName("ic_logout_24px")}),disabled:e.storage.authToken.length===0,onPress:()=>e.storage.authToken=""}))));e.storage.authToken??="";const f=[],A=()=>f.forEach(n=>n());return a.onUnload=A,a.settings=R,a})({},vendetta.plugin,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.metro,vendetta.utils,vendetta);
