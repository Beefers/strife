(function(n,e,i,c,r,l,s,u,d){"use strict";const h="915703782174752809",m="https://manti.vendicated.dev",{pushModal:p,popModal:y}=s.findByProps("pushModal"),f=s.findByDisplayName("OAuth2AuthorizeModal");function g(){return p({key:"oauth2-authorize",modal:{key:"oauth2-authorize",modal:f,animation:"slide-up",shouldPersistUnderModals:!1,props:{clientId:h,redirectUri:m+"/URauth",scopes:["identify"],responseType:"code",permissions:0n,cancelCompletesFlow:!1,callback:async function(a){let{location:b}=a;try{const o=new URL(b);o.searchParams.append("returnType","json"),o.searchParams.append("clientMod","vendetta");const k=await u.safeFetch(o.toString(),{headers:{accept:"application/json"}}),{token:E,status:B}=await k.json();if(B===0)e.storage.authToken=E;else throw new Error("Status returned by backend was not OK")}catch(o){d.logger.error("Authorization failed!",o)}},dismissOAuthModal:function(){return y("oauth2-authorize")}},closable:!0}})}const{FormSection:v,FormRow:t}=l.Forms;function w(){return c.useProxy(e.storage),React.createElement(i.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(v,{title:"Authentication",titleStyleType:"no_border"},React.createElement(t,{label:"Authenticate with ReviewDB",leading:React.createElement(t.Icon,{source:r.getAssetIDByName("copy")}),trailing:t.Arrow,onPress:g}),React.createElement(t,{label:"Log out of ReviewDB",subLabel:"Note that this does not remove ReviewDB from your Authorized Apps page in Discord.",leading:React.createElement(t.Icon,{source:r.getAssetIDByName("ic_logout_24px")}),disabled:e.storage.authToken.length===0,onPress:function(){return e.storage.authToken=""}})))}e.storage.authToken??="";const R=[],A=function(){return R.forEach(function(a){return a()})};return n.onUnload=A,n.settings=w,n})({},vendetta.plugin,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.metro,vendetta.utils,vendetta);
