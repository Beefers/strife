(function(a,t,n,o,u,g,v){"use strict";const r=n.findByProps("canUseEmojisEverywhere");var f=[o.instead("canUseEmojisEverywhere",r,()=>!0),o.instead("canUseAnimatedEmojis",r,()=>!0)];const{getCustomEmojiById:E}=n.findByProps("getCustomEmojiById"),{getLastSelectedGuildId:j}=n.findByProps("getLastSelectedGuildId"),y=/<a?:(\w+):(\d+)>/i;function S(e,i){const s=e.matchAll(/<a?:(\w+):(\d+)>/gi),l=[];for(const m of s){const c=E(m[2]);(c.guildId!=j()||c.animated)&&(e=e.replace(m[0],""),l.push(`${c.url.split("?")[0]}?size=${i}`))}return{newContent:e.trim(),extractedEmojis:l}}function d(e){if(!e.content.match(y))return;const{newContent:i,extractedEmojis:s}=S(e.content,t.storage.emojiSize);e.content=i,s.length>0&&(e.content+=`
`+s.join(`
`)),e.invalidEmojis=[]}const I=n.findByProps("sendMessage","receiveMessage"),h=n.findByProps("uploadLocalFiles");var p=[o.before("sendMessage",I,e=>d(e[1])),o.before("uploadLocalFiles",h,e=>d(e[0].parsedMessage))];const{FormInput:w}=g.Forms;var B=()=>(v.useProxy(t.storage),React.createElement(u.ReactNative.ScrollView,null,React.createElement(w,{title:"EMOJI SIZE (must be divisible by 16)",placeholder:"64",value:t.storage.emojiSize,onChange:e=>t.storage.emojiSize=e})));t.storage.emojiSize??="64";const $=[...f,...p],P=()=>$.forEach(e=>e());return a.onUnload=P,a.settings=B,a})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage);
