(function(a,n,s){"use strict";const d=n.findByProps("canUseEmojisEverywhere");var u=[s.instead("canUseEmojisEverywhere",d,()=>!0),s.instead("canUseAnimatedEmojis",d,()=>!0)];const{getCustomEmojiById:f}=n.findByProps("getCustomEmojiById"),{getLastSelectedGuildId:g}=n.findByProps("getLastSelectedGuildId"),m=/<a?:(\w+):(\d+)>/i;function v(e,i){const o=e.matchAll(/<a?:(\w+):(\d+)>/gi),r=[];for(const l of o){const t=f(l[2]);(t.guildId!=g()||t.animated||isInDms())&&(e=e.replace(l[0],""),r.push(`${t.url.split("?")[0]}?size=${i}`))}return[e.trim(),r]}var c=e=>{if(!e.content.match(m))return;const[i,o]=v(e.content,64);e.content=i,o.length>0&&(e.content+=`
`+o.join(`
`)),e.invalidEmojis=[]};const y=n.findByProps("sendMessage","receiveMessage"),E=n.findByProps("uploadLocalFiles");var p=[s.before("sendMessage",y,e=>c(e[1])),s.before("uploadLocalFiles",E,e=>c(e[0].parsedMessage))];const j=[...u,...p],B=()=>_.forEachRight(j,e=>e());return a.onUnload=B,a})({},vendetta.metro,vendetta.patcher);
