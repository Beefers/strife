(function(a,n,s){"use strict";const d=n.findByProps("canUseEmojisEverywhere");var u=[s.instead("canUseEmojisEverywhere",d,()=>!0),s.instead("canUseAnimatedEmojis",d,()=>!0)];const{getCustomEmojiById:f}=n.findByProps("getCustomEmojiById"),{getLastSelectedGuildId:m}=n.findByProps("getLastSelectedGuildId"),g=/<a?:(\w+):(\d+)>/i;function E(e,t){const o=e.matchAll(/<a?:(\w+):(\d+)>/gi),r=[];for(const l of o){const i=f(l[2]);(i.guildId!=m()||i.animated)&&(e=e.replace(l[0],""),r.push(`${i.url.split("?")[0]}?size=${t}`))}return{newContent:e.trim(),extractedEmojis:r}}function c(e){if(!e.content.match(g))return;const{newContent:t,extractedEmojis:o}=E(e.content,64);e.content=t,o.length>0&&(e.content+=`
`+o.join(`
`)),e.invalidEmojis=[]}const j=n.findByProps("sendMessage","receiveMessage"),y=n.findByProps("uploadLocalFiles");var p=[s.before("sendMessage",j,e=>c(e[1])),s.before("uploadLocalFiles",y,e=>c(e[0].parsedMessage))];const v=[...u,...p],B=()=>v.forEach(e=>e());return a.onUnload=B,a})({},vendetta.metro,vendetta.patcher);
