(function(o){"use strict";const{instead:a}=vendetta.patcher,{findByProps:g}=vendetta.metro,d=g("canUseEmojisEverywhere");var v=[a("canUseEmojisEverywhere",d,()=>!0),a("canUseAnimatedEmojis",d,()=>!0)];const{findByProps:i}=vendetta.metro,{getCustomEmojiById:f}=i("getCustomEmojiById"),{getLastSelectedGuildId:h}=i("getLastSelectedGuildId"),p=/<a?:(\w+):(\d+)>/i;function E(e,n){const t=e.matchAll(/<a?:(\w+):(\d+)>/gi),m=[];for(const u of t){const s=f(u[2]);(s.guildId!=h()||s.animated||isInDms())&&(e=e.replace(u[0],""),m.push(`${s.url.split("?")[0]}?size=${n}`))}return[e.trim(),m]}var c=e=>{if(!e.content.match(p))return;const[n,t]=E(e.content,64);e.content=n,t.length>0&&(e.content+=`
`+t.join(`
`)),e.invalidEmojis=[]};const{before:r}=vendetta.patcher,{findByProps:l}=vendetta.metro,$=l("sendMessage","receiveMessage"),j=l("uploadLocalFiles");var y=[r("sendMessage",$,e=>c(e[1])),r("uploadLocalFiles",j,e=>c(e[0].parsedMessage))];const I=[...v,...y],B=()=>_.forEachRight(I,e=>e());return o.onUnload=B,o})({});
