(function(i,n,t,o,m,f,g){"use strict";const c=t.findByProps("canUseEmojisEverywhere");var v=[o.instead("canUseEmojisEverywhere",c,function(){return!0}),o.instead("canUseAnimatedEmojis",c,function(){return!0})];const{getCustomEmojiById:E}=t.findByProps("getCustomEmojiById"),{getLastSelectedGuildId:j}=t.findByProps("getLastSelectedGuildId"),y=/<a?:(\w+):(\d+)>/i;function S(e,r){const s=e.matchAll(/<a?:(\w+):(\d+)>/gi),u=[];for(const l of s){const a=E(l[2]);(a.guildId!=j()||a.animated)&&(e=e.replace(l[0],""),u.push(`${a.url.split("?")[0]}?size=${r}`))}return{newContent:e.trim(),extractedEmojis:u}}function d(e){if(!e.content.match(y))return;const{newContent:r,extractedEmojis:s}=S(e.content,n.storage.emojiSize);e.content=r,s.length>0&&(e.content+=`
`+s.join(`
`)),e.invalidEmojis=[]}const I=t.findByProps("sendMessage","receiveMessage"),h=t.findByProps("uploadLocalFiles");var p=[o.before("sendMessage",I,function(e){return d(e[1])}),o.before("uploadLocalFiles",h,function(e){return d(e[0].parsedMessage)})];const{FormInput:w}=f.Forms;function B(){return g.useProxy(n.storage),React.createElement(m.ReactNative.ScrollView,null,React.createElement(w,{title:"EMOJI SIZE (must be divisible by 16)",placeholder:"64",value:n.storage.emojiSize,onChange:function(e){return n.storage.emojiSize=e}}))}n.storage.emojiSize??="64";const $=[...v,...p],P=function(){return $.forEach(function(e){return e()})};return i.onUnload=P,i.settings=B,i})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage);
